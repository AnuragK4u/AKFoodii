{"ast":null,"code":"const cart = [];\nconst handleCart = (state = cart, action) => {\n  const orderData = cart => {\n    fetch('http://localhost:3000/cartdetails/cart', {\n      method: 'DELETE',\n      body: JSON.stringify({\n        // cartdetails: JSON_REMOVE(cartdetails, '$[*]')\n      })\n    }).then(response => {\n      if (response.status === 204) {\n        // Deletion successful, the resource was removed (status 204 No Content)\n        console.log('Data deleted successfully');\n      } else {\n        // Handle any potential errors or non-204 status codes\n        console.error('Error deleting data');\n      }\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n    fetch(\"http://localhost:3000/cartdetails\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        cart\n      })\n    }).then(res => {\n      console.log(res);\n      //  toast.success(\"Checkout successfully.\");\n      //  navigate(\"/order\");\n    }).catch(err => {\n      console.log(err);\n      // toast.error(\"Failed: \" + err.message);\n    });\n  };\n\n  const rest = action.payload;\n  switch (action.type) {\n    case \"ADDITEM\":\n      //  check if Rest is Already Exist\n      const exist = state.find(x => x.id === rest.id);\n      if (exist) {\n        // Increase the Quantity\n        return state.map(x => x.id === rest.id ? {\n          ...x,\n          qty: x.qty + 1\n        } : x);\n        orderData(state);\n        return state;\n      } else {\n        const rest = action.payload;\n        const gg = [...state, {\n          ...rest,\n          qty: 1\n        }];\n        orderData(gg);\n        return gg;\n      }\n    // orderData(state);\n\n    case \"DELTITEM\":\n      const exist1 = state.find(x => x.id === rest.id);\n      console.log(\"delete\");\n      if (exist1.qty === 1) {\n        return state.filter(x => x.id !== exist1.id);\n      } else {\n        console.log(\"cart si th\");\n        return state.map(x => x.id === rest.id ? {\n          ...x,\n          qty: x.qty - 1\n        } : x);\n      }\n    default:\n      return state;\n  }\n};\nexport default handleCart;","map":{"version":3,"names":["cart","handleCart","state","action","orderData","fetch","method","body","JSON","stringify","then","response","status","console","log","error","catch","headers","res","err","rest","payload","type","exist","find","x","id","map","qty","gg","exist1","filter"],"sources":["C:/Users/kumar/OneDrive/Desktop/4 React project/Zomato/my-foodi/src/redux/reducer/handleCart.js"],"sourcesContent":["const cart = [];\r\n\r\nconst handleCart = (state = cart, action) => {\r\n  const orderData= (cart)=>{\r\n    fetch('http://localhost:3000/cartdetails/cart', {\r\n      method: 'DELETE',\r\n      body: JSON.stringify({\r\n        // cartdetails: JSON_REMOVE(cartdetails, '$[*]')\r\n      })\r\n})\r\n  .then(response => {\r\n    if (response.status === 204) {\r\n      // Deletion successful, the resource was removed (status 204 No Content)\r\n      console.log('Data deleted successfully');\r\n    } else {\r\n      // Handle any potential errors or non-204 status codes\r\n      console.error('Error deleting data');\r\n    }\r\n  })\r\n  .catch(error => {\r\n    console.error('Error:', error);\r\n  });\r\n\r\n    fetch(\"http://localhost:3000/cartdetails\", {\r\n      method: \"POST\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({cart}),\r\n    })\r\n      .then((res) => {\r\n        console.log(res)\r\n      //  toast.success(\"Checkout successfully.\");\r\n      //  navigate(\"/order\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n       // toast.error(\"Failed: \" + err.message);\r\n      });\r\n  }\r\n  const rest = action.payload;\r\n  switch (action.type) {\r\n    case \"ADDITEM\":\r\n      //  check if Rest is Already Exist\r\n      const exist = state.find((x) => x.id === rest.id);\r\n      if (exist) {\r\n        // Increase the Quantity\r\n          return state.map((x) =>\r\n          x.id === rest.id ? { ...x, qty: x.qty + 1 } : x\r\n        );\r\n         orderData(state);\r\n         return state;\r\n      } else {\r\n        const rest = action.payload;\r\n        const gg= [\r\n          ...state,\r\n          {\r\n            ...rest,\r\n            qty: 1,\r\n          },\r\n        ];\r\n        orderData(gg);\r\n        return gg;\r\n      }\r\n      // orderData(state);\r\n\r\n    case \"DELTITEM\":\r\n      const exist1 = state.find((x) => x.id === rest.id);\r\n      console.log(\"delete\");\r\n      if (exist1.qty === 1) {\r\n        return state.filter((x) => x.id !== exist1.id);\r\n      } else {\r\n        console.log(\"cart si th\");\r\n        return state.map((x) =>\r\n          x.id === rest.id ? { ...x, qty: x.qty - 1 } : x\r\n        );\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\nexport default handleCart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}