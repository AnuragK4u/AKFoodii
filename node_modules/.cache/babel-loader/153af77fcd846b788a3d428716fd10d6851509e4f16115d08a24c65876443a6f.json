{"ast":null,"code":"const cart = [];\nconst handleCart = (state = cart, action) => {\n  const orderData = sta => {\n    fetch('http://localhost:3000/cartdetails', {\n      method: 'DELETE'\n    }).then(() => {\n      // Cart data deleted successfully\n      console.log(\"deleted\");\n    }).catch(error => {\n      console.error('Error deleting cart data: ', error);\n    });\n    fetch(\"http://localhost:3000/cartdetails\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        sta\n      })\n    }).then(res => {\n      console.log(res);\n      console.log(123);\n      //  toast.success(\"Checkout successfully.\");\n      //  navigate(\"/order\");\n    }).catch(err => {\n      console.log(err);\n      // toast.error(\"Failed: \" + err.message);\n    });\n    // Assuming cartData is the JSON object representing the cart\n    function addToCart(product) {\n      // Check if the product is already in the cart\n      const existingItem = cartData.cart.find(item => item.product_id === product.product_id);\n      if (existingItem) {\n        // If the product is in the cart, update its quantity\n        existingItem.quantity += 1;\n      } else {\n        // If the product is not in the cart, add it\n        cartData.cart.push({\n          product_id: product.product_id,\n          name: product.name,\n          url: product.url,\n          price: product.price,\n          quantity: 1\n        });\n      }\n    }\n    const rest = action.payload;\n    switch (action.type) {\n      case \"ADDITEM\":\n        //  check if Rest is Already Exist\n        const exist = state.find(x => x.id === rest.id);\n        if (exist) {\n          // Increase the Quantity\n          state.map(x => x.id === rest.id ? {\n            ...x,\n            qty: x.qty + 1\n          } : x);\n          orderData(state);\n          return state;\n        } else {\n          const rest = action.payload;\n          const gg = [...state, {\n            ...rest,\n            qty: 1\n          }];\n          orderData(gg);\n          return gg;\n        }\n        orderData(state);\n      case \"DELTITEM\":\n        const exist1 = state.find(x => x.id === rest.id);\n        console.log(\"delete\");\n        if (exist1.qty === 1) {\n          return state.filter(x => x.id !== exist1.id);\n        } else {\n          console.log(\"cart si th\");\n          return state.map(x => x.id === rest.id ? {\n            ...x,\n            qty: x.qty - 1\n          } : x);\n        }\n      default:\n        return state;\n    }\n  };\n};\nexport default handleCart;","map":{"version":3,"names":["cart","handleCart","state","action","orderData","sta","fetch","method","then","console","log","catch","error","headers","body","JSON","stringify","res","err","addToCart","product","existingItem","cartData","find","item","product_id","quantity","push","name","url","price","rest","payload","type","exist","x","id","map","qty","gg","exist1","filter"],"sources":["C:/Users/kumar/OneDrive/Desktop/4 React project/Zomato/my-foodi/src/redux/reducer/handleCart.js"],"sourcesContent":["const cart = [];\r\n\r\nconst handleCart = (state = cart, action) => {\r\n  const orderData= (sta)=>{\r\n    fetch('http://localhost:3000/cartdetails', {\r\n        method: 'DELETE',\r\n    })\r\n        .then(() => {\r\n            // Cart data deleted successfully\r\n            console.log(\"deleted\");\r\n        })\r\n        .catch((error) => {\r\n            console.error('Error deleting cart data: ', error);\r\n        });\r\n\r\n    fetch(\"http://localhost:3000/cartdetails\", {\r\n      method: \"POST\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({sta}),\r\n    })\r\n      .then((res) => {\r\n        console.log(res)\r\n        console.log(123)\r\n      //  toast.success(\"Checkout successfully.\");\r\n      //  navigate(\"/order\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n       // toast.error(\"Failed: \" + err.message);\r\n      });\r\n      // Assuming cartData is the JSON object representing the cart\r\nfunction addToCart(product) {\r\n  // Check if the product is already in the cart\r\n  const existingItem = cartData.cart.find(\r\n    (item) => item.product_id === product.product_id\r\n  );\r\n\r\n  if (existingItem) {\r\n    // If the product is in the cart, update its quantity\r\n    existingItem.quantity += 1;\r\n  } else {\r\n    // If the product is not in the cart, add it\r\n    cartData.cart.push({\r\n      product_id: product.product_id,\r\n      name: product.name,\r\n      url: product.url,\r\n      price: product.price,\r\n      quantity: 1,\r\n    });\r\n  }\r\n  }\r\n  const rest = action.payload;\r\n  switch (action.type) {\r\n    case \"ADDITEM\":\r\n      //  check if Rest is Already Exist\r\n      const exist = state.find((x) => x.id === rest.id);\r\n      if (exist) {\r\n        // Increase the Quantity\r\n        state.map((x) =>\r\n          x.id === rest.id ? { ...x, qty: x.qty + 1 } : x\r\n        );\r\n        orderData(state);\r\n        return state;\r\n      } else {\r\n        const rest = action.payload;\r\n        const gg= [\r\n          ...state,\r\n          {\r\n            ...rest,\r\n            qty: 1,\r\n          },\r\n        ];\r\n        orderData(gg);\r\n        return gg;\r\n      }\r\n      orderData(state);\r\n\r\n    case \"DELTITEM\":\r\n      const exist1 = state.find((x) => x.id === rest.id);\r\n      console.log(\"delete\");\r\n      if (exist1.qty === 1) {\r\n        return state.filter((x) => x.id !== exist1.id);\r\n      } else {\r\n        console.log(\"cart si th\");\r\n        return state.map((x) =>\r\n          x.id === rest.id ? { ...x, qty: x.qty - 1 } : x\r\n        );\r\n      }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}};\r\nexport default handleCart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}